// tells Node I want to use lodash and express in this Node Project.
let _ = require('lodash');
// Makes the express software come to life.
let express = require('express');
// Run a web server but tells it that epxress supersedes http server.
let app = express();
// Express Routes web server but tells it that express supersades http server.
let http = require('http').Server(app);

let bodyParser = require('body-parser');

// express routes, tells what files to load when a request was made.
app.use( '/', express.static('html/') );

// This stuff is so we can use body-parser
app.use(bodyParser.json() );

// object
app.use(bodyParser.urlencoded({ extended: false}) );

// Please use these port
http.listen(3000);

console.log('Express server now running on port 3000!');

let tasks = [];

app.post('/fetchTasks', function (request, response) {
    let data = {
        "tasks" : tasks
    }
    
    response.send(data);
});

app.post("/newTask", function(request, response) {
   
   let recievedData = request.body;
   let newTask = recievedData.task;
   
   tasks.push(newTask);
   console.log(tasks)
   
   let data = {
        "tasks" : tasks
    }
    
    response.send(data);
});
